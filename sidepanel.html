<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Assistant</title>
  <link rel="stylesheet" href="sidepanel.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="header-top">
        <h1>AI Assistant</h1>
        <button id="new-chat-btn" class="new-chat-btn" title="Start new chat">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 5v14M5 12h14"/>
          </svg>
          <span>New Chat</span>
        </button>
      </div>
      <div class="connection-status">
        <span id="status-indicator" class="status-indicator disconnected"></span>
        <span id="status-text">Connecting...</span>
        <button id="reconnect-btn" class="reconnect-btn" title="Reconnect to Ollama">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
          </svg>
        </button>
        <button id="lighting-btn" class="reconnect-btn" title="Toggle lighting">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" stroke="none">
            <path d="M9 21h6v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7z"/>
          </svg>
        </button>
      </div>
    </div>

    <div id="chat-container" class="chat-container">
      <div class="welcome-message">
        <h2>Welcome to AI Assistant</h2>
        <p>Ask me questions about any topic. Use @tabname to reference specific browser tabs. I'm powered by Ollama running locally on your machine.</p>
        <div class="suggestions">
          <button class="suggestion-btn" data-query='Summarize @"'>Summarize @tabname</button>
          <button class="suggestion-btn" data-query='What are the main points in @"'>What are the main points in @tabname?</button>
          <button class="suggestion-btn" data-query='Explain @"'>Explain @tabname in simple terms</button>
        </div>
      </div>
    </div>

    <div class="input-container">
      <div class="controls">
        <label class="select-label">
          <span>Model:</span>
          <select id="model-select" class="model-select">
            <option value="">Loading models...</option>
          </select>
        </label>
        <label class="checkbox-label">
          <input type="checkbox" id="include-page">
          <span>Include page content</span>
        </label>
      </div>
      <div class="input-wrapper">
        <div class="tab-autocomplete" id="tab-autocomplete" style="display: none;">
          <div class="tab-suggestions" id="tab-suggestions"></div>
        </div>
        <textarea
          id="query-input"
          placeholder="Ask a question..."
          rows="1"
        ></textarea>
        <button id="send-btn" class="send-btn" disabled>
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M2 10L18 2L10 18L9 11L2 10Z" fill="currentColor"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <script src="sidepanel.js"></script>
</body>
</html>
